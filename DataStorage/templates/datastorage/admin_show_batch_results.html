{% extends 'admin/base_site.html' %}
{% load i18n admin_urls static admin_list %}

{% block extrastyle %}{{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}">
{% endblock %}

{% if not is_popup %}
    {% block breadcrumbs %}
        <div class="breadcrumbs">
            <a href="{% url 'admin:index' %}">Home</a>
            &rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
            &rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
            &rsaquo; CSV errors
        </div>
    {% endblock %}
{% endif %}


{% block content %}
    <div>
        CSV file was processed partially succesfull. Some errors were discovered along the way:
        {% if csv_errors.faulty_codes %}
            <h2>Incorrect entries</h2>
            <p>The following entries were found to have incorrect codes:</p>
            <ul>
            {% for entry in csv_errors.faulty_codes %}
                <li>{{ entry }}</li>
            {% endfor %}
            </ul>
        {% endif %}

        {% if csv_errors.empty %}
            <h2>Empty entries</h2>
            <p>The following entries were found empty:</p>
            <ul>
                {% for entry in csv_errors.empty %}
                    <li>{{ entry }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        {% if csv_errors.incomplete %}
            <h2>Incomplete entries</h2>
            <p>The following entries were found incomplete:</p>
            <ul>
                {% for entry in csv_errors.incomplete %}
                    <li>{{ entry }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        <div class="submit-row">
            <p class="deletelink-box"><a href="{% url opts|admin_urlname:'delete' original.pk|admin_urlquote %}" class="deletelink">Undo batch</a></p>
            <p><a class="button closelink" style="background-color: #417690" href="{% url opts|admin_urlname:'changelist' %}">Continue</a></p>
        </div>
    </div>


{% endblock %}